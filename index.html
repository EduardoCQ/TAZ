<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>T√¥ aprovado Zarns!</title>
    
    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Cdefs%3E%3ClinearGradient id='g' x1='0' y1='0' x2='1' y2='1'%3E%3Cstop offset='0' stop-color='%23667eea'/%3E%3Cstop offset='1' stop-color='%23764ba2'/%3E%3C/linearGradient%3E%3C/defs%3E%3Ccircle cx='16' cy='16' r='14' fill='url(%23g)'/%3E%3Ccircle cx='16' cy='16' r='8' fill='white'/%3E%3Ccircle cx='16' cy='16' r='3' fill='url(%23g)'/%3E%3Cpath d='M8 12c2-2 6-2 8 0 2-2 6-2 8 0' stroke='white' stroke-width='2' fill='none'/%3E%3Crect x='12' y='4' width='8' height='4' rx='2' fill='%23333'/%3E%3C/svg%3E?v=2">
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            transition: all 0.4s ease;
            overflow-x: hidden;
        }

        /* === TELA INICIAL === */
        .hero-section {
            height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            color: white;
            position: relative;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            transition: all 0.4s ease;
        }

        .hero-content {
            max-width: 600px;
            padding: 0 20px;
            animation: fadeInUp 1.2s ease-out;
        }

        .logo-area {
            margin-bottom: 2rem;
        }

        .graduation-icon {
            font-size: 4rem;
            display: block;
            margin-bottom: 1rem;
            animation: bounce 2s infinite;
        }

        .hero-title {
            font-size: 3.5rem;
            font-weight: bold;
            margin-bottom: 0.5rem;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
            background: linear-gradient(45deg, #fff, #f0f8ff);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .tagline {
            font-size: 1.4rem;
            margin-bottom: 2.5rem;
            opacity: 0.9;
            font-weight: 300;
        }

        .features-preview {
            display: flex;
            justify-content: center;
            gap: 2rem;
            margin-bottom: 3rem;
            flex-wrap: wrap;
        }

        .feature-item {
            background: rgba(255,255,255,0.15);
            padding: 1rem 1.5rem;
            border-radius: 25px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.2);
            font-size: 0.9rem;
            transition: all 0.3s ease;
        }

        .feature-item:hover {
            transform: translateY(-5px);
            background: rgba(255,255,255,0.25);
        }

        .cta-button {
            padding: 18px 40px;
            font-size: 1.3rem;
            font-weight: bold;
            background: rgba(255,255,255,0.2);
            color: white;
            border: 2px solid white;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.4s ease;
            backdrop-filter: blur(10px);
        }

        .cta-button:hover {
            background: white;
            color: #667eea;
            transform: translateY(-3px);
            box-shadow: 0 15px 35px rgba(0,0,0,0.2);
        }

        /* === CONTROLES FLUTUANTES === */
        .floating-controls {
            position: fixed;
            top: 25px;
            right: 25px;
            z-index: 1000;
            display: flex;
            gap: 12px;
        }

        .floating-btn {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: rgba(255,255,255,0.2);
            color: white;
            border: none;
            cursor: pointer;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
        }

        .floating-btn:hover {
            background: rgba(255,255,255,0.3);
            transform: scale(1.1);
        }

        /* === CALCULADORA === */
        .main-container {
            display: none;
            min-height: 100vh;
            padding: 20px;
            background: #f8f9fa;
            transition: all 0.4s ease;
        }

        .calculator-container {
            max-width: 600px;
            margin: 40px auto;
            padding: 40px;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.1);
            animation: slideInUp 0.8s ease-out;
        }

        .calculator-header {
            text-align: center;
            margin-bottom: 35px;
        }

        .calculator-header h1 {
            font-size: 2.5rem;
            background: linear-gradient(135deg, #667eea, #764ba2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 10px;
        }

        .author-credit {
            color: #666;
            font-size: 0.95rem;
            font-style: italic;
        }

        .input-section {
            margin-bottom: 20px;
        }

        .input-section label {
            display: block;
            margin-bottom: 8px;
            color: #333;
            font-weight: 600;
            font-size: 0.95rem;
        }

        .input-field {
            width: 100%;
            padding: 16px;
            border: 2px solid #e9ecef;
            border-radius: 12px;
            font-size: 1rem;
            transition: all 0.3s ease;
            background: #f8f9fa;
        }

        .input-field:focus {
            outline: none;
            border-color: #667eea;
            background: white;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .input-field.small {
            width: 100px;
            display: inline-block;
        }

        /* === ABAS === */
        .tabs-container {
            display: flex;
            gap: 8px;
            margin-bottom: 25px;
            flex-wrap: wrap;
        }

        .tab-btn {
            flex: 1;
            padding: 12px 10px;
            background: #f8f9fa;
            border: 2px solid #dee2e6;
            border-radius: 10px;
            cursor: pointer;
            font-size: 0.85rem;
            transition: all 0.3s ease;
            min-width: 120px;
        }

        .tab-btn:hover {
            background: #e9ecef;
            transform: translateY(-2px);
        }

        .tab-btn.active {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border-color: #667eea;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        /* === META SECTION === */
        .meta-section {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 12px;
            margin-bottom: 20px;
            border: 2px solid #e9ecef;
        }

        .meta-options {
            display: flex;
            gap: 20px;
            margin-bottom: 15px;
            flex-wrap: wrap;
        }

        .meta-option {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .meta-option input[type="radio"] {
            width: 18px;
            height: 18px;
        }

        .meta-field {
            display: none;
            margin-bottom: 15px;
        }

        .meta-calculate {
            background: linear-gradient(135deg, #28a745, #20c997);
            color: white;
            border: none;
            padding: 14px 20px;
            border-radius: 10px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: bold;
            width: 100%;
            transition: all 0.3s ease;
        }

        .meta-calculate:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(40, 167, 69, 0.3);
        }

        .calculate-button {
            width: 100%;
            padding: 18px;
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border: none;
            border-radius: 12px;
            font-size: 1.2rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 25px;
        }

        .calculate-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 15px 35px rgba(102, 126, 234, 0.4);
        }

        .result-display {
            margin-top: 30px;
            padding: 25px;
            border-radius: 12px;
            text-align: center;
            font-weight: bold;
            display: none;
            animation: fadeIn 0.6s ease-out;
        }

        .result-display.show { display: block; }

        .result-approved {
            background: linear-gradient(135deg, #28a745, #20c997);
            color: white;
        }

        .result-final-exam {
            background: linear-gradient(135deg, #ffc107, #fd7e14);
            color: white;
        }

        .result-failed {
            background: linear-gradient(135deg, #dc3545, #e83e8c);
            color: white;
        }

        .result-info {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
        }

        .utility-buttons {
            display: flex;
            gap: 10px;
            margin-top: 20px;
        }

        .utility-btn {
            flex: 1;
            padding: 12px;
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.9rem;
        }

        .utility-btn:hover {
            background: #e9ecef;
        }

        .help-text {
            font-size: 0.85rem;
            color: #6c757d;
            margin-top: 5px;
        }

        /* === MODO ESCURO === */
        body.dark-mode {
            background: linear-gradient(135deg, #2c3e50, #34495e);
        }

        body.dark-mode .hero-section {
            background: linear-gradient(135deg, #2c3e50, #34495e);
        }

        body.dark-mode .hero-title {
            background: linear-gradient(45deg, #ecf0f1, #bdc3c7);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        body.dark-mode .feature-item {
            background: rgba(255,255,255,0.1);
            border-color: rgba(255,255,255,0.15);
        }

        body.dark-mode .cta-button {
            background: rgba(255,255,255,0.15);
            border-color: rgba(255,255,255,0.8);
        }

        body.dark-mode .cta-button:hover {
            background: rgba(255,255,255,0.9);
            color: #2c3e50;
        }

        body.dark-mode .main-container {
            background: #1a1a1a;
        }

        body.dark-mode .calculator-container {
            background: #2d2d2d;
            color: white;
        }

        body.dark-mode .input-field {
            background: #404040;
            border-color: #555;
            color: white;
        }

        body.dark-mode .input-section label {
            color: #ccc;
        }

        body.dark-mode .meta-section {
            background: #404040;
            border-color: #555;
        }

        body.dark-mode .tab-btn {
            background: #404040;
            border-color: #555;
            color: white;
        }

        body.dark-mode .tab-btn.active {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
        }

        body.dark-mode .utility-btn {
            background: #404040;
            border-color: #555;
            color: white;
        }

        body.dark-mode .author-credit {
            color: #aaa;
        }

        body.dark-mode .help-text {
            color: #999;
        }

        /* === ANIMA√á√ïES === */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(40px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes slideInUp {
            from {
                opacity: 0;
                transform: translateY(60px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
            40% { transform: translateY(-10px); }
            60% { transform: translateY(-5px); }
        }

        /* === RESPONSIVIDADE === */
        @media (max-width: 768px) {
            .hero-title {
                font-size: 2.5rem;
            }
            
            .features-preview {
                flex-direction: column;
                gap: 1rem;
            }
            
            .calculator-container {
                margin: 20px auto;
                padding: 25px;
            }
            
            .floating-controls {
                top: 15px;
                right: 15px;
            }

            .meta-options {
                flex-direction: column;
                gap: 10px;
            }

            .tabs-container {
                flex-direction: column;
            }

            .tab-btn {
                min-width: 100%;
            }
        }
    </style>
</head>
<body>
    <!-- Controles Flutuantes -->
    <div class="floating-controls">
        <button class="floating-btn" onclick="toggleDarkMode()" title="Alternar modo escuro">üåô</button>
        <button class="floating-btn" onclick="resetAll()" title="Limpar tudo">üîÑ</button>
    </div>

    <!-- Tela Inicial -->
    <div class="hero-section" id="heroSection">
        <div class="hero-content">
            <div class="logo-area">
                <span class="graduation-icon">üéØ</span>
                <h1 class="hero-title">T√¥ aprovado Zarns!</h1>
            </div>
            
            <p class="tagline">Sua calculadora acad√™mica inteligente</p>
            
            <div class="features-preview">
                <div class="feature-item">üìä C√°lculo Completo</div>
                <div class="feature-item">üî¢ M√©dia da Unidade</div>
                <div class="feature-item">üéØ Metas Personalizadas</div>
            </div>
            
            <button class="cta-button" onclick="showCalculator()">üöÄ Calcular Minhas Notas</button>
        </div>
    </div>

    <!-- Calculadora Principal -->
    <div class="main-container" id="mainContainer">
        <div class="calculator-container">
            <div class="calculator-header">
                <h1>üéØ T√¥ aprovado Zarns!</h1>
                <p class="author-credit">Por Eduardo Chaves Queiroz</p>
            </div>

            <!-- ABAS DE NAVEGA√á√ÉO -->
            <div class="tabs-container">
                <button class="tab-btn active" onclick="switchTab('completo', this)">üìä C√°lculo Completo</button>
                <button class="tab-btn" onclick="switchTab('calculo-unidade', this)">üî¢ C√°lculo da Unidade</button>
                <button class="tab-btn" onclick="switchTab('unidades', this)">üéØ Meta Entre Unidades</button>
                <button class="tab-btn" onclick="switchTab('unidade', this)">üí° Meta na Unidade</button>
            </div>

            <!-- TAB 1: C√ÅLCULO COMPLETO -->
            <div id="tab-completo" class="tab-content active">
                <div class="input-section">
                    <label for="av1_teorica">üìö Nota Te√≥rica da AV1</label>
                    <input type="text" id="av1_teorica" class="input-field" placeholder="Digite sua nota (0-100)" inputmode="decimal">
                </div>

                <div class="input-section">
                    <label for="av1_pratica">üî¨ Nota Pr√°tica da AV1</label>
                    <input type="text" id="av1_pratica" class="input-field" placeholder="Digite sua nota (0-100)" inputmode="decimal">
                </div>

                <div class="input-section">
                    <label for="av2_teorica">üìñ Nota Te√≥rica da AV2</label>
                    <input type="text" id="av2_teorica" class="input-field" placeholder="Digite sua nota (0-100)" inputmode="decimal">
                </div>

                <div class="input-section">
                    <label for="av2_pratica">‚öóÔ∏è Nota Pr√°tica da AV2</label>
                    <input type="text" id="av2_pratica" class="input-field" placeholder="Digite sua nota (0-100)" inputmode="decimal">
                </div>

                <button class="calculate-button" onclick="calculateGrades()">üéØ Calcular Minha M√©dia Completa</button>

                <div id="resultDisplay" class="result-display"></div>
            </div>

            <!-- TAB 2: C√ÅLCULO DA UNIDADE - ATUALIZADA -->
            <div id="tab-calculo-unidade" class="tab-content">
                <div class="meta-section">
                    <div class="input-section">
                        <label for="nota_teorica_unidade">üìö Nota Te√≥rica</label>
                        <input type="text" id="nota_teorica_unidade" class="input-field" placeholder="Digite sua nota te√≥rica (0-100)" inputmode="decimal">
                        <p class="help-text">Peso: 60% da m√©dia da unidade</p>
                    </div>

                    <div class="input-section">
                        <label for="nota_pratica_unidade">üî¨ Nota Pr√°tica</label>
                        <input type="text" id="nota_pratica_unidade" class="input-field" placeholder="Digite sua nota pr√°tica (0-100)" inputmode="decimal">
                        <p class="help-text">Peso: 40% da m√©dia da unidade</p>
                    </div>

                    <button class="meta-calculate" onclick="calcularMediaUnidade()">
                        üî¢ Calcular M√©dia da Unidade
                    </button>

                    <div id="resultCalculoUnidade"></div>
                </div>
            </div>

            <!-- TAB 3: META ENTRE UNIDADES -->
            <div id="tab-unidades" class="tab-content">
                <div class="meta-section">
                    <div class="input-section">
                        <label for="media_av1">üìä M√©dia da 1¬™ Unidade</label>
                        <input type="text" id="media_av1" class="input-field" placeholder="Ex: 75" inputmode="decimal">
                        <p class="help-text">Digite a m√©dia que voc√™ obteve na primeira unidade</p>
                    </div>

                    <div class="input-section">
                        <label for="meta_final_unidades">üéØ Meta de M√©dia Final</label>
                        <input type="text" id="meta_final_unidades" class="input-field" placeholder="70" inputmode="decimal" value="70">
                        <p class="help-text">Ajuste conforme seu objetivo (ex: 60, 70, 80)</p>
                    </div>

                    <button class="meta-calculate" onclick="calcularMetaEntreUnidades()">
                        üéØ Calcular Quanto Preciso na 2¬™ Unidade
                    </button>

                    <div id="resultUnidades"></div>
                </div>
            </div>

            <!-- TAB 4: META NA UNIDADE -->
            <div id="tab-unidade" class="tab-content">
                <div class="meta-section">
                    <div class="meta-options">
                        <div class="meta-option">
                            <input type="radio" id="temTeorica" name="metaOption" onchange="toggleMetaFields()">
                            <label for="temTeorica">üìö J√° tenho a nota Te√≥rica</label>
                        </div>
                        <div class="meta-option">
                            <input type="radio" id="temPratica" name="metaOption" onchange="toggleMetaFields()">
                            <label for="temPratica">üî¨ J√° tenho a nota Pr√°tica</label>
                        </div>
                    </div>

                    <div class="meta-field" id="campoTeoricaMeta">
                        <label for="notaTeoricaMeta">üìö Minha nota Te√≥rica:</label>
                        <input type="text" id="notaTeoricaMeta" class="input-field" placeholder="Digite sua nota te√≥rica" inputmode="decimal">
                    </div>

                    <div class="meta-field" id="campoPraticaMeta">
                        <label for="notaPraticaMeta">üî¨ Minha nota Pr√°tica:</label>
                        <input type="text" id="notaPraticaMeta" class="input-field" placeholder="Digite sua nota pr√°tica" inputmode="decimal">
                    </div>

                    <div class="input-section">
                        <label for="meta_unidade">üéØ Meta de M√©dia na Unidade</label>
                        <input type="text" id="meta_unidade" class="input-field" placeholder="70" inputmode="decimal" value="70">
                        <p class="help-text">Ajuste conforme seu objetivo (ex: 60, 70, 80)</p>
                    </div>

                    <button class="meta-calculate" onclick="calcularNotaNecessaria()">
                        üéØ Calcular Quanto Preciso
                    </button>

                    <div id="metaResult"></div>
                </div>
            </div>

            <div class="utility-buttons">
                <button class="utility-btn" onclick="clearFields()">üóëÔ∏è Limpar Campos</button>
                <button class="utility-btn" onclick="showHero()">üè† Tela Inicial</button>
            </div>
        </div>
    </div>

    <script>
        // Navega√ß√£o entre telas
        function showCalculator() {
            document.getElementById('heroSection').style.display = 'none';
            document.getElementById('mainContainer').style.display = 'block';
        }

        function showHero() {
            document.getElementById('heroSection').style.display = 'flex';
            document.getElementById('mainContainer').style.display = 'none';
            clearFields();
        }

        // Sistema de abas
        function switchTab(tabName, element) {
            document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));
            document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));
            
            element.classList.add('active');
            document.getElementById(`tab-${tabName}`).classList.add('active');
            
            // Limpar resultados ao trocar de aba
            document.getElementById('resultDisplay').className = 'result-display';
            document.getElementById('resultDisplay').innerHTML = '';
            document.getElementById('resultCalculoUnidade').innerHTML = '';
            document.getElementById('resultUnidades').innerHTML = '';
            document.getElementById('metaResult').innerHTML = '';
        }

        // Modo escuro
        function toggleDarkMode() {
            document.body.classList.toggle('dark-mode');
            localStorage.setItem('darkMode', document.body.classList.contains('dark-mode'));
        }

        // Limpar campos
        function clearFields() {
            document.getElementById('av1_teorica').value = '';
            document.getElementById('av1_pratica').value = '';
            document.getElementById('av2_teorica').value = '';
            document.getElementById('av2_pratica').value = '';
            document.getElementById('nota_teorica_unidade').value = '';
            document.getElementById('nota_pratica_unidade').value = '';
            document.getElementById('media_av1').value = '';
            document.getElementById('meta_final_unidades').value = '70';
            document.getElementById('notaTeoricaMeta').value = '';
            document.getElementById('notaPraticaMeta').value = '';
            document.getElementById('meta_unidade').value = '70';
            document.getElementById('resultDisplay').className = 'result-display';
            document.getElementById('resultDisplay').innerHTML = '';
            document.getElementById('resultCalculoUnidade').innerHTML = '';
            document.getElementById('resultUnidades').innerHTML = '';
            document.getElementById('metaResult').innerHTML = '';
            
            document.getElementById('temTeorica').checked = false;
            document.getElementById('temPratica').checked = false;
            document.getElementById('campoTeoricaMeta').style.display = 'none';
            document.getElementById('campoPraticaMeta').style.display = 'none';
        }

        // Reset completo
        function resetAll() {
            clearFields();
            if (document.getElementById('mainContainer').style.display === 'block') {
                showHero();
            }
        }

        // FUN√á√ÉO ATUALIZADA: Calcular m√©dia da unidade com planejamento estrat√©gico
        function calcularMediaUnidade() {
            const notaTeorica = parseFloat(document.getElementById('nota_teorica_unidade').value.replace(',', '.'));
            const notaPratica = parseFloat(document.getElementById('nota_pratica_unidade').value.replace(',', '.'));
            
            // Valida√ß√µes
            if (isNaN(notaTeorica) || isNaN(notaPratica)) {
                document.getElementById('resultCalculoUnidade').innerHTML = '<div style="padding: 15px; background: #dc3545; color: white; border-radius: 8px; margin-top: 10px; text-align: center;"><strong>‚ö†Ô∏è Preencha ambas as notas</strong></div>';
                return;
            }
            
            if (notaTeorica < 0 || notaTeorica > 100) {
                document.getElementById('resultCalculoUnidade').innerHTML = '<div style="padding: 15px; background: #dc3545; color: white; border-radius: 8px; margin-top: 10px; text-align: center;"><strong>‚ö†Ô∏è Nota te√≥rica deve estar entre 0 e 100</strong></div>';
                return;
            }
            
            if (notaPratica < 0 || notaPratica > 100) {
                document.getElementById('resultCalculoUnidade').innerHTML = '<div style="padding: 15px; background: #dc3545; color: white; border-radius: 8px; margin-top: 10px; text-align: center;"><strong>‚ö†Ô∏è Nota pr√°tica deve estar entre 0 e 100</strong></div>';
                return;
            }
            
            // Calcular m√©dia (te√≥rica = 60%, pr√°tica = 40%)
            const mediaUnidade = (notaTeorica * 0.6) + (notaPratica * 0.4);
            
            // Exibir resultado
            let resultado = '<div style="padding: 20px; border-radius: 12px; margin-top: 15px; text-align: center; font-weight: bold;">';
            
            if (mediaUnidade >= 70) {
                resultado += '<div style="background: linear-gradient(135deg, #28a745, #20c997); color: white; padding: 20px; border-radius: 10px;">';
                resultado += '<h4>üéâ M√âDIA ALCAN√áADA!</h4>';
                resultado += `<p style="font-size: 2.5rem; margin: 15px 0; font-weight: bold;">${mediaUnidade.toFixed(1)}</p>`;
                resultado += '<p>Sua m√©dia nesta unidade √©</p>';
                resultado += '<p style="margin-top: 10px;">‚úÖ Voc√™ atingiu a meta de 70!</p>';
                resultado += '</div>';
            } else if (mediaUnidade >= 50) {
                // Calcular quanto precisa na pr√≥xima unidade para aprova√ß√£o
                const mediaProximaUnidade = (70 * 2) - mediaUnidade;
                
                resultado += '<div style="background: linear-gradient(135deg, #ffc107, #fd7e14); color: white; padding: 20px; border-radius: 10px;">';
                resultado += '<h4>‚ö†Ô∏è ATEN√á√ÉO!</h4>';
                resultado += `<p style="font-size: 2.5rem; margin: 15px 0; font-weight: bold;">${mediaUnidade.toFixed(1)}</p>`;
                resultado += '<p>Sua m√©dia nesta unidade √©</p>';
                resultado += '<hr style="margin: 15px 0; border: 1px solid rgba(255,255,255,0.3);">';
                resultado += '<h4 style="margin-top: 15px;">üéØ PLANO DE A√á√ÉO:</h4>';
                
                if (mediaProximaUnidade <= 100) {
                    resultado += `<p style="margin-top: 10px;">Voc√™ precisa de <strong>${mediaProximaUnidade.toFixed(1)}</strong> na pr√≥xima unidade para atingir m√©dia final 70</p>`;
                } else {
                    resultado += `<p style="margin-top: 10px;">Mesmo com nota m√°xima (100) na pr√≥xima unidade, n√£o ser√° poss√≠vel atingir m√©dia 70</p>`;
                    resultado += `<p style="margin-top: 5px;">Foque em metas alternativas!</p>`;
                }
                resultado += '</div>';
            } else {
                // Calcular quanto precisa na pr√≥xima unidade
                const mediaProximaUnidade = (70 * 2) - mediaUnidade;
                
                resultado += '<div style="background: linear-gradient(135deg, #dc3545, #e83e8c); color: white; padding: 20px; border-radius: 10px;">';
                resultado += '<h4>üìö ATEN√á√ÉO REDOBRADA!</h4>';
                resultado += `<p style="font-size: 2.5rem; margin: 15px 0; font-weight: bold;">${mediaUnidade.toFixed(1)}</p>`;
                resultado += '<p>Sua m√©dia nesta unidade √©</p>';
                resultado += '<hr style="margin: 15px 0; border: 1px solid rgba(255,255,255,0.3);">';
                resultado += '<h4 style="margin-top: 15px;">üéØ PR√ìXIMOS PASSOS:</h4>';
                
                if (mediaProximaUnidade <= 100) {
                    resultado += `<p style="margin-top: 10px;">Voc√™ precisa de <strong>${mediaProximaUnidade.toFixed(1)}</strong> na pr√≥xima unidade para atingir m√©dia 70</p>`;
                    resultado += '<p style="margin-top: 5px;">Foque total nos estudos!</p>';
                } else {
                    resultado += `<p style="margin-top: 10px;">Seria necess√°rio <strong>${mediaProximaUnidade.toFixed(1)}</strong> na pr√≥xima unidade</p>`;
                    resultado += '<p style="margin-top: 5px;">Infelizmente, mesmo com 100 n√£o ser√° poss√≠vel. Converse com seu professor sobre op√ß√µes!</p>';
                }
                resultado += '</div>';
            }
            
            resultado += '</div>';
            document.getElementById('resultCalculoUnidade').innerHTML = resultado;
        }

        // Calcular meta entre unidades
        function calcularMetaEntreUnidades() {
            const mediaUnidade1 = parseFloat(document.getElementById('media_av1').value.replace(',', '.'));
            const metaFinal = parseFloat(document.getElementById('meta_final_unidades').value.replace(',', '.'));
            
            if (isNaN(mediaUnidade1)) {
                document.getElementById('resultUnidades').innerHTML = '<div style="padding: 15px; background: #dc3545; color: white; border-radius: 8px; margin-top: 10px; text-align: center;"><strong>‚ö†Ô∏è Digite a m√©dia da 1¬™ Unidade</strong></div>';
                return;
            }
            
            if (isNaN(metaFinal) || metaFinal < 0 || metaFinal > 100) {
                document.getElementById('resultUnidades').innerHTML = '<div style="padding: 15px; background: #dc3545; color: white; border-radius: 8px; margin-top: 10px; text-align: center;"><strong>‚ö†Ô∏è Meta final inv√°lida (0-100)</strong></div>';
                return;
            }
            
            if (mediaUnidade1 < 0 || mediaUnidade1 > 100) {
                document.getElementById('resultUnidades').innerHTML = '<div style="padding: 15px; background: #dc3545; color: white; border-radius: 8px; margin-top: 10px; text-align: center;"><strong>‚ö†Ô∏è M√©dia da 1¬™ Unidade deve estar entre 0 e 100</strong></div>';
                return;
            }
            
            const mediaUnidade2Necessaria = (metaFinal * 2) - mediaUnidade1;
            
            let resultado = '<div style="padding: 20px; border-radius: 12px; margin-top: 15px; text-align: center; font-weight: bold;">';
            
            if (mediaUnidade2Necessaria <= 0) {
                resultado += '<div style="background: linear-gradient(135deg, #28a745, #20c997); color: white; padding: 20px; border-radius: 10px;">';
                resultado += '<h4>üéâ META J√Å ALCAN√áADA!</h4>';
                resultado += `<p style="margin-top: 10px;">Com m√©dia ${mediaUnidade1.toFixed(1)} na 1¬™ Unidade, voc√™ j√° atingiu a meta ${metaFinal.toFixed(0)}!</p>`;
                resultado += '</div>';
            } else if (mediaUnidade2Necessaria <= 100) {
                resultado += '<div style="background: linear-gradient(135deg, #667eea, #764ba2); color: white; padding: 20px; border-radius: 10px;">';
                resultado += '<h4>üéØ VOC√ä PRECISA DE:</h4>';
                resultado += `<p style="font-size: 2.5rem; margin: 15px 0; font-weight: bold;">${mediaUnidade2Necessaria.toFixed(1)}</p>`;
                resultado += `<p>de m√©dia na <strong>2¬™ Unidade</strong> para atingir m√©dia final ${metaFinal.toFixed(0)}</p>`;
                resultado += '</div>';
            } else {
                resultado += '<div style="background: linear-gradient(135deg, #ffc107, #fd7e14); color: white; padding: 20px; border-radius: 10px;">';
                resultado += '<h4>‚ö†Ô∏è META MUITO DIF√çCIL!</h4>';
                resultado += `<p style="margin: 10px 0;">Seria necess√°rio <strong>${mediaUnidade2Necessaria.toFixed(1)}</strong> na 2¬™ Unidade</p>`;
                resultado += '<p>Mesmo com nota m√°xima (100) n√£o ser√° poss√≠vel!</p>';
                resultado += '</div>';
            }
            
            resultado += '</div>';
            document.getElementById('resultUnidades').innerHTML = resultado;
        }

        // Alternar campos de meta na unidade
        function toggleMetaFields() {
            const temTeorica = document.getElementById('temTeorica').checked;
            const temPratica = document.getElementById('temPratica').checked;
            
            document.getElementById('campoTeoricaMeta').style.display = temTeorica ? 'block' : 'none';
            document.getElementById('campoPraticaMeta').style.display = temPratica ? 'block' : 'none';
            
            document.getElementById('metaResult').innerHTML = '';
            
            if (!temTeorica) document.getElementById('notaTeoricaMeta').value = '';
            if (!temPratica) document.getElementById('notaPraticaMeta').value = '';
        }

        // Calcular nota necess√°ria na unidade
        function calcularNotaNecessaria() {
            const temTeorica = document.getElementById('temTeorica').checked;
            const temPratica = document.getElementById('temPratica').checked;
            const metaUnidade = parseFloat(document.getElementById('meta_unidade').value.replace(',', '.'));
            
            if (!temTeorica && !temPratica) {
                document.getElementById('metaResult').innerHTML = '<div style="padding: 15px; background: #ffc107; color: #000; border-radius: 8px; margin-top: 10px; text-align: center;"><strong>‚ö†Ô∏è Selecione qual nota voc√™ j√° possui</strong></div>';
                return;
            }
            
            if (isNaN(metaUnidade) || metaUnidade < 0 || metaUnidade > 100) {
                document.getElementById('metaResult').innerHTML = '<div style="padding: 15px; background: #dc3545; color: white; border-radius: 8px; margin-top: 10px; text-align: center;"><strong>‚ö†Ô∏è Meta inv√°lida (0-100)</strong></div>';
                return;
            }
            
            let notaConhecida, tipoConhecida;
            
            if (temTeorica) {
                notaConhecida = parseFloat(document.getElementById('notaTeoricaMeta').value.replace(',', '.'));
                tipoConhecida = 'teorica';
                
                if (isNaN(notaConhecida)) {
                    document.getElementById('metaResult').innerHTML = '<div style="padding: 15px; background: #dc3545; color: white; border-radius: 8px; margin-top: 10px; text-align: center;"><strong>‚ö†Ô∏è Digite sua nota te√≥rica</strong></div>';
                    return;
                }
            } else {
                notaConhecida = parseFloat(document.getElementById('notaPraticaMeta').value.replace(',', '.'));
                tipoConhecida = 'pratica';
                
                if (isNaN(notaConhecida)) {
                    document.getElementById('metaResult').innerHTML = '<div style="padding: 15px; background: #dc3545; color: white; border-radius: 8px; margin-top: 10px; text-align: center;"><strong>‚ö†Ô∏è Digite sua nota pr√°tica</strong></div>';
                    return;
                }
            }
            
            if (notaConhecida < 0 || notaConhecida > 100) {
                document.getElementById('metaResult').innerHTML = '<div style="padding: 15px; background: #dc3545; color: white; border-radius: 8px; margin-top: 10px; text-align: center;"><strong>‚ö†Ô∏è A nota deve estar entre 0 e 100</strong></div>';
                return;
            }
            
            let notaNecessaria, tipoNecessaria;
            
            if (tipoConhecida === 'teorica') {
                notaNecessaria = (metaUnidade - (notaConhecida * 0.6)) / 0.4;
                tipoNecessaria = 'Pr√°tica';
            } else {
                notaNecessaria = (metaUnidade - (notaConhecida * 0.4)) / 0.6;
                tipoNecessaria = 'Te√≥rica';
            }
            
            let resultado = '<div style="padding: 20px; border-radius: 12px; margin-top: 15px; text-align: center; font-weight: bold;">';
            
            if (notaNecessaria <= 0) {
                resultado += '<div style="background: linear-gradient(135deg, #28a745, #20c997); color: white; padding: 20px; border-radius: 10px;">';
                resultado += '<h4>üéâ META J√Å ALCAN√áADA!</h4>';
                resultado += `<p style="margin-top: 10px;">Voc√™ j√° atingiu a meta ${metaUnidade.toFixed(0)} com essa nota!</p>`;
                resultado += '</div>';
            } else if (notaNecessaria <= 100) {
                resultado += '<div style="background: linear-gradient(135deg, #667eea, #764ba2); color: white; padding: 20px; border-radius: 10px;">';
                resultado += '<h4>üéØ VOC√ä PRECISA DE:</h4>';
                resultado += `<p style="font-size: 2rem; margin: 15px 0; font-weight: bold;">${notaNecessaria.toFixed(1)}</p>`;
                resultado += `<p>na avalia√ß√£o <strong>${tipoNecessaria}</strong> para atingir m√©dia ${metaUnidade.toFixed(0)}</p>`;
                resultado += '</div>';
            } else {
                resultado += '<div style="background: linear-gradient(135deg, #ffc107, #fd7e14); color: white; padding: 20px; border-radius: 10px;">';
                resultado += '<h4>‚ö†Ô∏è META DIF√çCIL!</h4>';
                resultado += `<p style="margin: 10px 0;">Seria necess√°rio <strong>${notaNecessaria.toFixed(1)}</strong> na ${tipoNecessaria}</p>`;
                resultado += '<p>Considere ajustar sua meta ou focar na pr√≥xima unidade!</p>';
                resultado += '</div>';
            }
            
            resultado += '</div>';
            document.getElementById('metaResult').innerHTML = resultado;
        }

        // Validar e formatar nota
        function validateGrade(value) {
            value = value.replace(',', '.');
            value = value.replace(/[^0-9.]/g, '');
            
            const parts = value.split('.');
            if (parts.length > 2) {
                value = parts[0] + '.' + parts[1];
            }
            
            const num = parseFloat(value);
            
            if (!isNaN(num)) {
                if (num < 0) return '0';
                if (num > 100) return '100';
            }
            
            return value;
        }

        // C√°lculo completo
        function calculateGrades() {
            const av1_teorica_raw = document.getElementById("av1_teorica").value;
            const av1_pratica_raw = document.getElementById("av1_pratica").value;
            const av2_teorica_raw = document.getElementById("av2_teorica").value;
            const av2_pratica_raw = document.getElementById("av2_pratica").value;
            
            const av1_teorica_clean = validateGrade(av1_teorica_raw);
            const av1_pratica_clean = validateGrade(av1_pratica_raw);
            const av2_teorica_clean = validateGrade(av2_teorica_raw);
            const av2_pratica_clean = validateGrade(av2_pratica_raw);
            
            document.getElementById("av1_teorica").value = av1_teorica_clean;
            document.getElementById("av1_pratica").value = av1_pratica_clean;
            document.getElementById("av2_teorica").value = av2_teorica_clean;
            document.getElementById("av2_pratica").value = av2_pratica_clean;
            
            const av1_teorica = parseFloat(av1_teorica_clean);
            const av1_pratica = parseFloat(av1_pratica_clean);
            const av2_teorica = parseFloat(av2_teorica_clean);
            const av2_pratica = parseFloat(av2_pratica_clean);
            
            if (isNaN(av1_teorica) || isNaN(av1_pratica) || isNaN(av2_teorica) || isNaN(av2_pratica)) {
                showResult("‚ö†Ô∏è Por favor, preencha todas as notas!", "result-failed");
                return;
            }
            
            const media_av1 = (av1_teorica * 0.6) + (av1_pratica * 0.4);
            const media_av2 = (av2_teorica * 0.6) + (av2_pratica * 0.4);
            const nota_final = (media_av1 + media_av2) / 2;
            
            let resultado = `<h3>üìä An√°lise Completa</h3>`;
            resultado += `<p><strong>M√©dia AV1:</strong> ${media_av1.toFixed(2)}</p>`;
            resultado += `<p><strong>M√©dia AV2:</strong> ${media_av2.toFixed(2)}</p>`;
            resultado += `<p><strong>M√©dia Final:</strong> ${nota_final.toFixed(2)}</p>`;
            resultado += `<hr style="margin: 15px 0; border: 1px solid rgba(255,255,255,0.3);">`;
            
            let resultClass = '';
            
            if (nota_final >= 70) {
                resultado += "<h4>üéâ APROVADO DIRETAMENTE!</h4>";
                resultado += "<p>Parab√©ns! Voc√™ n√£o precisa fazer avalia√ß√£o final.</p>";
                resultClass = 'result-approved';
            } else if (nota_final >= 40) {
                const nota_necessaria = (60 - (nota_final * 0.6)) / 0.4;
                resultado += "<h4>üìù AVALIA√á√ÉO FINAL NECESS√ÅRIA</h4>";
                resultado += `<p>Voc√™ precisa obter pelo menos <strong>${nota_necessaria.toFixed(2)}</strong> na avalia√ß√£o final para ser aprovado.</p>`;
                resultClass = 'result-final-exam';
                
                setTimeout(() => {
                    const avaliacao_final = prompt("üéØ Digite a nota da avalia√ß√£o final (0-100):");
                    if (avaliacao_final !== null && !isNaN(parseFloat(avaliacao_final.replace(',', '.')))) {
                        const nota_af = parseFloat(avaliacao_final.replace(',', '.'));
                        const media_final = (nota_final * 0.6) + (nota_af * 0.4);
                        resultado += `<hr style="margin: 15px 0; border: 1px solid rgba(255,255,255,0.3);">`;
                        resultado += `<p><strong>Nota Avalia√ß√£o Final:</strong> ${nota_af.toFixed(2)}</p>`;
                        resultado += `<p><strong>M√©dia Final com AF:</strong> ${media_final.toFixed(2)}</p>`;
                        
                        if (media_final >= 60) {
                            resultado += "<h4>üéâ APROVADO NA AVALIA√á√ÉO FINAL!</h4>";
                            showResult(resultado, 'result-approved');
                        } else {
                            resultado += "<h4>‚ùå REPROVADO NA AVALIA√á√ÉO FINAL</h4>";
                            showResult(resultado, 'result-failed');
                        }
                    }
                }, 1000);
            } else {
                resultado += "<h4>‚ùå REPROVADO DIRETAMENTE</h4>";
                resultado += "<p>Mesmo com nota m√°xima na avalia√ß√£o final, n√£o ser√° poss√≠vel atingir a m√©dia m√≠nima.</p>";
                resultClass = 'result-failed';
            }
            
            showResult(resultado, resultClass);
        }

        // Exibir resultado
        function showResult(content, className) {
            const resultDiv = document.getElementById('resultDisplay');
            resultDiv.innerHTML = content;
            resultDiv.className = `result-display show ${className}`;
        }

        // Inicializa√ß√£o
        document.addEventListener('DOMContentLoaded', function() {
            if (localStorage.getItem('darkMode') === 'true') {
                document.body.classList.add('dark-mode');
            }
            
            const inputs = document.querySelectorAll('.input-field');
            inputs.forEach(input => {
                input.addEventListener('keypress', function(e) {
                    if (e.key === 'Enter') {
                        const activeTab = document.querySelector('.tab-content.active');
                        if (activeTab.id === 'tab-completo') {
                            calculateGrades();
                        } else if (activeTab.id === 'tab-calculo-unidade') {
                            calcularMediaUnidade();
                        } else if (activeTab.id === 'tab-unidades') {
                            calcularMetaEntreUnidades();
                        } else if (activeTab.id === 'tab-unidade') {
                            calcularNotaNecessaria();
                        }
                    }
                });
            });
        });
    </script>
</body>
</html>
