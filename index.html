<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>T√¥ aprovado Zarns!</title>
    
    <!-- Favicon simplificado que funciona -->
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Cdefs%3E%3ClinearGradient id='g' x1='0' y1='0' x2='1' y2='1'%3E%3Cstop offset='0' stop-color='%23667eea'/%3E%3Cstop offset='1' stop-color='%23764ba2'/%3E%3C/linearGradient%3E%3C/defs%3E%3Ccircle cx='16' cy='16' r='14' fill='url(%23g)'/%3E%3Ccircle cx='16' cy='16' r='8' fill='white'/%3E%3Ccircle cx='16' cy='16' r='3' fill='url(%23g)'/%3E%3Cpath d='M8 12c2-2 6-2 8 0 2-2 6-2 8 0' stroke='white' stroke-width='2' fill='none'/%3E%3Crect x='12' y='4' width='8' height='4' rx='2' fill='%23333'/%3E%3C/svg%3E?v=2">
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            transition: all 0.4s ease;
            overflow-x: hidden;
        }

        /* === TELA INICIAL === */
        .hero-section {
            height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            color: white;
            position: relative;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            transition: all 0.4s ease;
        }

        .hero-content {
            max-width: 600px;
            padding: 0 20px;
            animation: fadeInUp 1.2s ease-out;
        }

        .logo-area {
            margin-bottom: 2rem;
        }

        .graduation-icon {
            font-size: 4rem;
            display: block;
            margin-bottom: 1rem;
            animation: bounce 2s infinite;
        }

        .hero-title {
            font-size: 3.5rem;
            font-weight: bold;
            margin-bottom: 0.5rem;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
            background: linear-gradient(45deg, #fff, #f0f8ff);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .tagline {
            font-size: 1.4rem;
            margin-bottom: 2.5rem;
            opacity: 0.9;
            font-weight: 300;
        }

        .features-preview {
            display: flex;
            justify-content: center;
            gap: 2rem;
            margin-bottom: 3rem;
            flex-wrap: wrap;
        }

        .feature-item {
            background: rgba(255,255,255,0.15);
            padding: 1rem 1.5rem;
            border-radius: 25px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.2);
            font-size: 0.9rem;
            transition: all 0.3s ease;
        }

        .feature-item:hover {
            transform: translateY(-5px);
            background: rgba(255,255,255,0.25);
        }

        .cta-button {
            padding: 18px 40px;
            font-size: 1.3rem;
            font-weight: bold;
            background: rgba(255,255,255,0.2);
            color: white;
            border: 2px solid white;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.4s ease;
            backdrop-filter: blur(10px);
        }

        .cta-button:hover {
            background: white;
            color: #667eea;
            transform: translateY(-3px);
            box-shadow: 0 15px 35px rgba(0,0,0,0.2);
        }

        /* === CONTROLES FLUTUANTES === */
        .floating-controls {
            position: fixed;
            top: 25px;
            right: 25px;
            z-index: 1000;
            display: flex;
            gap: 12px;
        }

        .floating-btn {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: rgba(255,255,255,0.2);
            color: white;
            border: none;
            cursor: pointer;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
        }

        .floating-btn:hover {
            background: rgba(255,255,255,0.3);
            transform: scale(1.1);
        }

        /* === CALCULADORA === */
        .main-container {
            display: none;
            min-height: 100vh;
            padding: 20px;
            background: #f8f9fa;
            transition: all 0.4s ease;
        }

        .calculator-container {
            max-width: 520px;
            margin: 40px auto;
            padding: 40px;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.1);
            animation: slideInUp 0.8s ease-out;
        }

        .calculator-header {
            text-align: center;
            margin-bottom: 35px;
        }

        .calculator-header h1 {
            font-size: 2.5rem;
            background: linear-gradient(135deg, #667eea, #764ba2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 10px;
        }

        .author-credit {
            color: #666;
            font-size: 0.95rem;
            font-style: italic;
        }

        .input-section {
            margin-bottom: 20px;
        }

        .input-section label {
            display: block;
            margin-bottom: 8px;
            color: #333;
            font-weight: 600;
            font-size: 0.95rem;
        }

        .input-field {
            width: 100%;
            padding: 16px;
            border: 2px solid #e9ecef;
            border-radius: 12px;
            font-size: 1rem;
            transition: all 0.3s ease;
            background: #f8f9fa;
        }

        .input-field:focus {
            outline: none;
            border-color: #667eea;
            background: white;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        /* === SE√á√ÉO DE META === */
        .meta-toggle {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 10px;
            cursor: pointer;
            font-size: 0.9rem;
            margin: 20px 0 10px 0;
            width: 100%;
            transition: all 0.3s ease;
        }

        .meta-toggle:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.3);
        }

        .meta-section {
            display: none;
            background: #f8f9fa;
            padding: 20px;
            border-radius: 12px;
            margin-bottom: 20px;
            border: 2px solid #e9ecef;
        }

        .meta-options {
            display: flex;
            gap: 20px;
            margin-bottom: 15px;
            flex-wrap: wrap;
        }

        .meta-option {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .meta-option input[type="radio"] {
            width: 18px;
            height: 18px;
        }

        .meta-field {
            display: none;
            margin-bottom: 15px;
        }

        .meta-calculate {
            background: linear-gradient(135deg, #28a745, #20c997);
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: bold;
            width: 100%;
            transition: all 0.3s ease;
        }

        .meta-calculate:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(40, 167, 69, 0.3);
        }

        .calculate-button {
            width: 100%;
            padding: 18px;
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border: none;
            border-radius: 12px;
            font-size: 1.2rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 25px;
        }

        .calculate-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 15px 35px rgba(102, 126, 234, 0.4);
        }

        .result-display {
            margin-top: 30px;
            padding: 25px;
            border-radius: 12px;
            text-align: center;
            font-weight: bold;
            display: none;
            animation: fadeIn 0.6s ease-out;
        }

        .result-display.show { display: block; }

        .result-approved {
            background: linear-gradient(135deg, #28a745, #20c997);
            color: white;
        }

        .result-final-exam {
            background: linear-gradient(135deg, #ffc107, #fd7e14);
            color: white;
        }

        .result-failed {
            background: linear-gradient(135deg, #dc3545, #e83e8c);
            color: white;
        }

        .utility-buttons {
            display: flex;
            gap: 10px;
            margin-top: 20px;
        }

        .utility-btn {
            flex: 1;
            padding: 12px;
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.9rem;
        }

        .utility-btn:hover {
            background: #e9ecef;
        }

        /* === MODO ESCURO === */
        body.dark-mode {
            background: linear-gradient(135deg, #2c3e50, #34495e);
        }

        body.dark-mode .hero-section {
            background: linear-gradient(135deg, #2c3e50, #34495e);
        }

        body.dark-mode .hero-title {
            background: linear-gradient(45deg, #ecf0f1, #bdc3c7);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        body.dark-mode .feature-item {
            background: rgba(255,255,255,0.1);
            border-color: rgba(255,255,255,0.15);
        }

        body.dark-mode .cta-button {
            background: rgba(255,255,255,0.15);
            border-color: rgba(255,255,255,0.8);
        }

        body.dark-mode .cta-button:hover {
            background: rgba(255,255,255,0.9);
            color: #2c3e50;
        }

        body.dark-mode .main-container {
            background: #1a1a1a;
        }

        body.dark-mode .calculator-container {
            background: #2d2d2d;
            color: white;
        }

        body.dark-mode .input-field {
            background: #404040;
            border-color: #555;
            color: white;
        }

        body.dark-mode .input-section label {
            color: #ccc;
        }

        body.dark-mode .meta-section {
            background: #404040;
            border-color: #555;
        }

        body.dark-mode .utility-btn {
            background: #404040;
            border-color: #555;
            color: white;
        }

        body.dark-mode .author-credit {
            color: #aaa;
        }

        /* === ANIMA√á√ïES === */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(40px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes slideInUp {
            from {
                opacity: 0;
                transform: translateY(60px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
            40% { transform: translateY(-10px); }
            60% { transform: translateY(-5px); }
        }

        /* === RESPONSIVIDADE === */
        @media (max-width: 768px) {
            .hero-title {
                font-size: 2.5rem;
            }
            
            .features-preview {
                flex-direction: column;
                gap: 1rem;
            }
            
            .calculator-container {
                margin: 20px auto;
                padding: 25px;
            }
            
            .floating-controls {
                top: 15px;
                right: 15px;
            }

            .meta-options {
                flex-direction: column;
                gap: 10px;
            }
        }
    </style>
</head>
<body>
    <!-- Controles Flutuantes -->
    <div class="floating-controls">
        <button class="floating-btn" onclick="toggleDarkMode()" title="Alternar modo escuro">üåô</button>
        <button class="floating-btn" onclick="resetAll()" title="Limpar tudo">üîÑ</button>
    </div>

    <!-- Tela Inicial -->
    <div class="hero-section" id="heroSection">
        <div class="hero-content">
            <div class="logo-area">
                <span class="graduation-icon">üéØ</span>
                <h1 class="hero-title">T√¥ aprovado Zarns!</h1>
            </div>
            
            <p class="tagline">Sua calculadora acad√™mica inteligente</p>
            
            <div class="features-preview">
                <div class="feature-item">üìä C√°lculo Autom√°tico</div>
                <div class="feature-item">üéØ Calculadora de Meta</div>
                <div class="feature-item">üí° Nota para Aprova√ß√£o</div>
            </div>
            
            <button class="cta-button" onclick="showCalculator()">üöÄ Calcular Minhas Notas</button>
        </div>
    </div>

    <!-- Calculadora Principal -->
    <div class="main-container" id="mainContainer">
        <div class="calculator-container">
            <div class="calculator-header">
                <h1>üéØ T√¥ aprovado Zarns!</h1>
                <p class="author-credit">Por Eduardo Chaves Queiroz</p>
            </div>

            <div class="input-section">
                <label for="av1_teorica">üìö Nota Te√≥rica da AV1</label>
                <input type="text" id="av1_teorica" class="input-field" placeholder="Digite sua nota (0-100)" inputmode="decimal">
            </div>

            <div class="input-section">
                <label for="av1_pratica">üî¨ Nota Pr√°tica da AV1</label>
                <input type="text" id="av1_pratica" class="input-field" placeholder="Digite sua nota (0-100)" inputmode="decimal">
            </div>

            <div class="input-section">
                <label for="av2_teorica">üìñ Nota Te√≥rica da AV2</label>
                <input type="text" id="av2_teorica" class="input-field" placeholder="Digite sua nota (0-100)" inputmode="decimal">
            </div>

            <div class="input-section">
                <label for="av2_pratica">‚öóÔ∏è Nota Pr√°tica da AV2</label>
                <input type="text" id="av2_pratica" class="input-field" placeholder="Digite sua nota (0-100)" inputmode="decimal">
            </div>

            <!-- NOVA SE√á√ÉO: Calculadora de Meta -->
            <button class="meta-toggle" id="metaToggle" onclick="toggleMetaSection()">
                ‚ñº üéØ Calculadora de Meta (Clique para expandir)
            </button>

            <div class="meta-section" id="metaSection">
                <div class="meta-options">
                    <div class="meta-option">
                        <input type="radio" id="temTeorica" name="metaOption" onchange="toggleMetaFields()">
                        <label for="temTeorica">üìö J√° tenho a nota Te√≥rica</label>
                    </div>
                    <div class="meta-option">
                        <input type="radio" id="temPratica" name="metaOption" onchange="toggleMetaFields()">
                        <label for="temPratica">üî¨ J√° tenho a nota Pr√°tica</label>
                    </div>
                </div>

                <div class="meta-field" id="campoTeoricaMeta">
                    <label for="notaTeoricaMeta">üìö Minha nota Te√≥rica:</label>
                    <input type="text" id="notaTeoricaMeta" class="input-field" placeholder="Digite sua nota te√≥rica" inputmode="decimal">
                </div>

                <div class="meta-field" id="campoPraticaMeta">
                    <label for="notaPraticaMeta">üî¨ Minha nota Pr√°tica:</label>
                    <input type="text" id="notaPraticaMeta" class="input-field" placeholder="Digite sua nota pr√°tica" inputmode="decimal">
                </div>

                <button class="meta-calculate" onclick="calcularNotaNecessaria()">
                    üéØ Calcular Quanto Preciso
                </button>

                <div id="metaResult"></div>
            </div>

            <button class="calculate-button" onclick="calculateGrades()">üéØ Calcular Minha M√©dia Completa</button>

            <div id="resultDisplay" class="result-display"></div>

            <div class="utility-buttons">
                <button class="utility-btn" onclick="clearFields()">üóëÔ∏è Limpar Campos</button>
                <button class="utility-btn" onclick="showHero()">üè† Tela Inicial</button>
            </div>
        </div>
    </div>

    <script>
        // Navega√ß√£o entre telas
        function showCalculator() {
            document.getElementById('heroSection').style.display = 'none';
            document.getElementById('mainContainer').style.display = 'block';
        }

        function showHero() {
            document.getElementById('heroSection').style.display = 'flex';
            document.getElementById('mainContainer').style.display = 'none';
            clearFields();
        }

        // Modo escuro
        function toggleDarkMode() {
            document.body.classList.toggle('dark-mode');
            localStorage.setItem('darkMode', document.body.classList.contains('dark-mode'));
        }

        // Limpar campos
        function clearFields() {
            document.getElementById('av1_teorica').value = '';
            document.getElementById('av1_pratica').value = '';
            document.getElementById('av2_teorica').value = '';
            document.getElementById('av2_pratica').value = '';
            document.getElementById('notaTeoricaMeta').value = '';
            document.getElementById('notaPraticaMeta').value = '';
            document.getElementById('resultDisplay').className = 'result-display';
            document.getElementById('resultDisplay').innerHTML = '';
            document.getElementById('metaResult').innerHTML = '';
            
            // Resetar se√ß√£o de meta
            document.getElementById('temTeorica').checked = false;
            document.getElementById('temPratica').checked = false;
            document.getElementById('campoTeoricaMeta').style.display = 'none';
            document.getElementById('campoPraticaMeta').style.display = 'none';
        }

        // Reset completo
        function resetAll() {
            clearFields();
            if (document.getElementById('mainContainer').style.display === 'block') {
                showHero();
            }
        }

        // NOVA FUNCIONALIDADE: Mostrar/ocultar se√ß√£o de meta
        function toggleMetaSection() {
            const metaSection = document.getElementById('metaSection');
            const toggleBtn = document.getElementById('metaToggle');
            
            if (metaSection.style.display === 'none' || metaSection.style.display === '') {
                metaSection.style.display = 'block';
                toggleBtn.innerHTML = '‚ñ≤ üéØ Calculadora de Meta (Clique para ocultar)';
            } else {
                metaSection.style.display = 'none';
                toggleBtn.innerHTML = '‚ñº üéØ Calculadora de Meta (Clique para expandir)';
                document.getElementById('metaResult').innerHTML = '';
            }
        }

        // NOVA FUNCIONALIDADE: Alternar entre campos de meta
        function toggleMetaFields() {
            const temTeorica = document.getElementById('temTeorica').checked;
            const temPratica = document.getElementById('temPratica').checked;
            
            // Mostrar/ocultar campos apropriados
            document.getElementById('campoTeoricaMeta').style.display = temTeorica ? 'block' : 'none';
            document.getElementById('campoPraticaMeta').style.display = temPratica ? 'block' : 'none';
            
            // Limpar resultado anterior
            document.getElementById('metaResult').innerHTML = '';
            
            // Limpar campos n√£o utilizados
            if (!temTeorica) document.getElementById('notaTeoricaMeta').value = '';
            if (!temPratica) document.getElementById('notaPraticaMeta').value = '';
        }

        // NOVA FUNCIONALIDADE: Calcular nota necess√°ria para meta
        function calcularNotaNecessaria() {
            const temTeorica = document.getElementById('temTeorica').checked;
            const temPratica = document.getElementById('temPratica').checked;
            
            if (!temTeorica && !temPratica) {
                document.getElementById('metaResult').innerHTML = '<div style="padding: 15px; background: #ffc107; color: #000; border-radius: 8px; margin-top: 10px; text-align: center;"><strong>‚ö†Ô∏è Selecione qual nota voc√™ j√° possui</strong></div>';
                return;
            }
            
            let notaConhecida, tipoConhecida, metaDesejada = 70;
            
            if (temTeorica) {
                notaConhecida = parseFloat(document.getElementById('notaTeoricaMeta').value.replace(',', '.'));
                tipoConhecida = 'teorica';
                
                if (isNaN(notaConhecida)) {
                    document.getElementById('metaResult').innerHTML = '<div style="padding: 15px; background: #dc3545; color: white; border-radius: 8px; margin-top: 10px; text-align: center;"><strong>‚ö†Ô∏è Digite sua nota te√≥rica</strong></div>';
                    return;
                }
            } else {
                notaConhecida = parseFloat(document.getElementById('notaPraticaMeta').value.replace(',', '.'));
                tipoConhecida = 'pratica';
                
                if (isNaN(notaConhecida)) {
                    document.getElementById('metaResult').innerHTML = '<div style="padding: 15px; background: #dc3545; color: white; border-radius: 8px; margin-top: 10px; text-align: center;"><strong>‚ö†Ô∏è Digite sua nota pr√°tica</strong></div>';
                    return;
                }
            }
            
            // Validar nota conhecida
            if (notaConhecida < 0 || notaConhecida > 100) {
                document.getElementById('metaResult').innerHTML = '<div style="padding: 15px; background: #dc3545; color: white; border-radius: 8px; margin-top: 10px; text-align: center;"><strong>‚ö†Ô∏è A nota deve estar entre 0 e 100</strong></div>';
                return;
            }
            
            // Calcular nota necess√°ria
            let notaNecessaria, tipoNecessaria;
            
            if (tipoConhecida === 'teorica') {
                notaNecessaria = (metaDesejada - (notaConhecida * 0.6)) / 0.4;
                tipoNecessaria = 'Pr√°tica';
            } else {
                notaNecessaria = (metaDesejada - (notaConhecida * 0.4)) / 0.6;
                tipoNecessaria = 'Te√≥rica';
            }
            
            // Exibir resultado
            let resultado = '<div style="padding: 20px; border-radius: 12px; margin-top: 15px; text-align: center; font-weight: bold;">';
            
            if (notaNecessaria <= 0) {
                resultado += '<div style="background: linear-gradient(135deg, #28a745, #20c997); color: white; padding: 20px; border-radius: 10px;">';
                resultado += '<h4>üéâ META J√Å ALCAN√áADA!</h4>';
                resultado += '<p style="margin-top: 10px;">Voc√™ j√° atingiu a m√©dia 70 com essa nota!</p>';
                resultado += '</div>';
            } else if (notaNecessaria <= 100) {
                resultado += '<div style="background: linear-gradient(135deg, #667eea, #764ba2); color: white; padding: 20px; border-radius: 10px;">';
                resultado += '<h4>üéØ VOC√ä PRECISA DE:</h4>';
                resultado += `<p style="font-size: 2rem; margin: 15px 0; font-weight: bold;">${notaNecessaria.toFixed(1)}</p>`;
                resultado += `<p>na avalia√ß√£o <strong>${tipoNecessaria}</strong> para atingir m√©dia 70</p>`;
                resultado += '</div>';
            } else {
                resultado += '<div style="background: linear-gradient(135deg, #ffc107, #fd7e14); color: white; padding: 20px; border-radius: 10px;">';
                resultado += '<h4>‚ö†Ô∏è META DIF√çCIL!</h4>';
                resultado += `<p style="margin: 10px 0;">Seria necess√°rio <strong>${notaNecessaria.toFixed(1)}</strong> na ${tipoNecessaria}</p>`;
                resultado += '<p>Considere focar na pr√≥xima unidade!</p>';
                resultado += '</div>';
            }
            
            resultado += '</div>';
            document.getElementById('metaResult').innerHTML = resultado;
        }

        // Fun√ß√£o para validar e formatar nota
        function validateGrade(value) {
            // Substitui v√≠rgula por ponto
            value = value.replace(',', '.');
            
            // Remove caracteres inv√°lidos
            value = value.replace(/[^0-9.]/g, '');
            
            // Garante apenas um ponto
            const parts = value.split('.');
            if (parts.length > 2) {
                value = parts + '.' + parts;
            }
            
            // Converte para n√∫mero
            const num = parseFloat(value);
            
            // Aplica limites
            if (!isNaN(num)) {
                if (num < 0) return '0';
                if (num > 100) return '100';
            }
            
            return value;
        }

        // Fun√ß√£o principal de c√°lculo
        function calculateGrades() {
            // Pega e valida os valores
            const av1_teorica_raw = document.getElementById("av1_teorica").value;
            const av1_pratica_raw = document.getElementById("av1_pratica").value;
            const av2_teorica_raw = document.getElementById("av2_teorica").value;
            const av2_pratica_raw = document.getElementById("av2_pratica").value;
            
            // Valida e formata cada campo
            const av1_teorica_clean = validateGrade(av1_teorica_raw);
            const av1_pratica_clean = validateGrade(av1_pratica_raw);
            const av2_teorica_clean = validateGrade(av2_teorica_raw);
            const av2_pratica_clean = validateGrade(av2_pratica_raw);
            
            // Atualiza os campos com valores limpos
            document.getElementById("av1_teorica").value = av1_teorica_clean;
            document.getElementById("av1_pratica").value = av1_pratica_clean;
            document.getElementById("av2_teorica").value = av2_teorica_clean;
            document.getElementById("av2_pratica").value = av2_pratica_clean;
            
            // Converte para n√∫meros
            const av1_teorica = parseFloat(av1_teorica_clean);
            const av1_pratica = parseFloat(av1_pratica_clean);
            const av2_teorica = parseFloat(av2_teorica_clean);
            const av2_pratica = parseFloat(av2_pratica_clean);
            
            // Valida√ß√£o
            if (isNaN(av1_teorica) || isNaN(av1_pratica) || isNaN(av2_teorica) || isNaN(av2_pratica)) {
                showResult("‚ö†Ô∏è Por favor, preencha todas as notas!", "result-failed");
                return;
            }
            
            // C√°lculos
            const media_av1 = (av1_teorica * 0.6) + (av1_pratica * 0.4);
            const media_av2 = (av2_teorica * 0.6) + (av2_pratica * 0.4);
            const nota_final = (media_av1 + media_av2) / 2;
            
            // Resultado detalhado
            let resultado = `<h3>üìä An√°lise Completa</h3>`;
            resultado += `<p><strong>M√©dia AV1:</strong> ${media_av1.toFixed(2)}</p>`;
            resultado += `<p><strong>M√©dia AV2:</strong> ${media_av2.toFixed(2)}</p>`;
            resultado += `<p><strong>M√©dia Final:</strong> ${nota_final.toFixed(2)}</p>`;
            resultado += `<hr style="margin: 15px 0; border: 1px solid rgba(255,255,255,0.3);">`;
            
            let resultClass = '';
            
            if (nota_final >= 70) {
                resultado += "<h4>üéâ APROVADO DIRETAMENTE!</h4>";
                resultado += "<p>Parab√©ns! Voc√™ n√£o precisa fazer avalia√ß√£o final.</p>";
                resultClass = 'result-approved';
            } else if (nota_final >= 40) {
                const nota_necessaria = (60 - (nota_final * 0.6)) / 0.4;
                resultado += "<h4>üìù AVALIA√á√ÉO FINAL NECESS√ÅRIA</h4>";
                resultado += `<p>Voc√™ precisa obter pelo menos <strong>${nota_necessaria.toFixed(2)}</strong> na avalia√ß√£o final para ser aprovado.</p>`;
                resultClass = 'result-final-exam';
                
                // Solicitar nota da avalia√ß√£o final
                setTimeout(() => {
                    const avaliacao_final = prompt("üéØ Digite a nota da avalia√ß√£o final (0-100):");
                    if (avaliacao_final !== null && !isNaN(parseFloat(avaliacao_final.replace(',', '.')))) {
                        const nota_af = parseFloat(avaliacao_final.replace(',', '.'));
                        const media_final = (nota_final * 0.6) + (nota_af * 0.4);
                        resultado += `<hr style="margin: 15px 0; border: 1px solid rgba(255,255,255,0.3);">`;
                        resultado += `<p><strong>Nota Avalia√ß√£o Final:</strong> ${nota_af.toFixed(2)}</p>`;
                        resultado += `<p><strong>M√©dia Final com AF:</strong> ${media_final.toFixed(2)}</p>`;
                        
                        if (media_final >= 60) {
                            resultado += "<h4>üéâ APROVADO NA AVALIA√á√ÉO FINAL!</h4>";
                            showResult(resultado, 'result-approved');
                        } else {
                            resultado += "<h4>‚ùå REPROVADO NA AVALIA√á√ÉO FINAL</h4>";
                            showResult(resultado, 'result-failed');
                        }
                    }
                }, 1000);
            } else {
                resultado += "<h4>‚ùå REPROVADO DIRETAMENTE</h4>";
                resultado += "<p>Mesmo com nota m√°xima na avalia√ß√£o final, n√£o ser√° poss√≠vel atingir a m√©dia m√≠nima.</p>";
                resultClass = 'result-failed';
            }
            
            showResult(resultado, resultClass);
        }

        // Exibir resultado
        function showResult(content, className) {
            const resultDiv = document.getElementById('resultDisplay');
            resultDiv.innerHTML = content;
            resultDiv.className = `result-display show ${className}`;
        }

        // Inicializa√ß√£o
        document.addEventListener('DOMContentLoaded', function() {
            // Carregar prefer√™ncia de modo escuro
            if (localStorage.getItem('darkMode') === 'true') {
                document.body.classList.add('dark-mode');
            }
            
            // Eventos de teclado
            const inputs = document.querySelectorAll('.input-field');
            inputs.forEach(input => {
                input.addEventListener('keypress', function(e) {
                    if (e.key === 'Enter') {
                        if (input.closest('#metaSection')) {
                            calcularNotaNecessaria();
                        } else {
                            calculateGrades();
                        }
                    }
                });
            });
        });
    </script>
</body>
</html>
